
(Roles I)

(GlobalVars
	(n : ℕ = 0)
)

(FormalContract "Collatz"
	(StartSection Ongoing)

	(Section Ongoing
		(Next
			(I may EnterFulfilled immediately)

			(if (n < 5)
				(I may Throw immediately)
			)


		)
	)

	(Action Throw
		(StateTransform
			(n += 1)
		)
		(TransitionsTo Ongoing)
		(Future
			(I must-later (Catch m) immediately (where (m == n)))
		)
	)

	(Action (Catch (m : ℕ))
		(TransitionsTo Ongoing)
	)

	(Action EnterFulfilled)
)